[gcode_macro Z_ENDSTOP_CALIBRATE]
rename_existing: Z_ENDSTOP_CALIBRATE_BASE
gcode:
    SET_GCODE_OFFSET Z=0.00

    BED_MESH_CLEAR

    G28 P0

    G0 X{printer["gcode_macro _PROBE_VARIABLES"].pos[0] + printer.configfile.settings.probe.x_offset} Y{printer["gcode_macro _PROBE_VARIABLES"].pos[1] + printer.configfile.settings.probe.y_offset} F5000

    Z_ENDSTOP_CALIBRATE_BASE {rawparams}
  