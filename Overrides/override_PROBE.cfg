[gcode_macro PROBE_XY_OFFSET]
gcode:
    PROBE {% for p in params
                %}{'%s=%s ' % (p, params[p])}{%
               endfor %}

[gcode_macro PROBE]
rename_existing: PROBE_BASE
gcode:
    BED_MESH_CLEAR

    LOCK_DOCKING
    G28 CENTER=FALSE
    ATTACH_PROBE RETURN_TO_POSITION=FALSE

    G1 X{printer["gcode_macro _BED_SIZE"].bed_size[0] / 2} Y{printer["gcode_macro _PROBE_VARIABLES"].y_pos} F5000

    PROBE_BASE {% for p in params
                %}{'%s=%s ' % (p, params[p])}{%
               endfor %}

    UNLOCK_DOCKING
    RESPOND PREFIX=Please MSG="remove the probe manually and set it into the dock"
    M117 Please remove probe
