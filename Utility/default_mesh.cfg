[gcode_macro SET_DEFAULT_MESH]
gcode:
  {% set DEFAULT_MESH = params.DEFAULT_MESH|default('default')|string %}
  SAVE_VARIABLE VARIABLE=default_mesh VALUE="'{DEFAULT_MESH}'"
  GET_DEFAULT_MESH

[gcode_macro SET_DEFAULT_MESH_TEXTURED]
gcode:
  SET_DEFAULT_MESH DEFAULT_MESH='TEXTURED'

[gcode_macro SET_DEFAULT_MESH_SMOOTH]
gcode:
  SET_DEFAULT_MESH DEFAULT_MESH='SMOOTH'

[gcode_macro GET_DEFAULT_MESH]
gcode:
  {% if printer.save_variables.variables.default_mesh is defined %}
    {% set DEFAULT_MESH = printer.save_variables.variables.default_mesh|string %}
  {% else %}
    {% set DEFAULT_MESH = "default" %}
  {% endif %}
  RESPOND MSG="<span class=warning--text>Default bed mesh: </span> <span class=error--text>{DEFAULT_MESH}</span>"
